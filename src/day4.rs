pub const TEST_INPUT: &str = r#"..@@.@@@@.
@@@.@.@.@@
@@@@@.@.@@
@.@@@@..@.
@@.@@@@.@@
.@@@@@@@.@
.@.@.@.@@@
@.@@@.@@@@
.@@@@@@@@.
@.@.@@@.@."#;

pub const INPUT: &str = r#"@@...@@@..@@@@@@@@@..@..@@@@@@.@.@@@..@@@@.@@@@@@@@..@.@@.@.@.@.@.@@.@.@@@.@@.@....@.@@.@@@.@@@@.@@@....@@@@@@.@@@.@@.@@.@....@@@@.@..@@.@@@
@@@@.@@@.@@...@@@.@.@.@.@@@.@@.@@@@@.@@@@@.@.@@@@@@@...@@@.@.@@@@@@@@@@@@........@.@@..@@@..@@@@....@@@@@@@@@@@.@.....@@@@..@..@.@@@..@..@@.
@.@@@@@@@.@@..@@.@@@.@..@..@@@@.@..@@.@.@..@@@@..@@.@@@@.@@@...@@.@@....@@@@@@...@@.....@@@...@@@@@.@@@@@@..@.@@@@@@@.@@@@@@@.@@@@@@.@.@.@..
.@@.@@@@@@@@@@@@@@@..@..@@@.@.@@@@.@@...@@@...@@..@.@@@.@@@.@@@.@@@@.@@.@@.@@@@..@@@@.@@@.@.@@@@@.@.@@@@@.@..@.@@.@.@...@@@@@....@.@@@@@@@..
@@.@@@@@@@@..@@@..@.@...@@.@.@.@@.@.@@.@..@@@@@@@@.....@@@@.....@.@@.@@..@..@@.@@@@@@@@@@.@@@@.@@@..@@@.@.@@.@@@@@@@@@@@@.@@.@...@@.@.@@@..@
@@.@@@.@.@@..@...@.@@@@..@@@...@@@@.@@@.@..@.@.@...@...@@@@@@@@.....@.@.@@@..@.@@..@@.@@@@@@@.@...@@@.@@.@@@@@@@.@.@..@..@@@@..@@.@@@@.@@.@@
@@@@.@@@..@.@.@@@@@@@@@@@@@@@@@@@@@..@@...@.@..@.@.@@@.@@@@@@@@@.@@@@@..@.@@@.@@@@@.@.@@@@@..@@@@.@@@@@@@.@@.@@.@@@@..@@@@@@@@...@@@.@.@@@.@
@@@.@@@...@@@@@@@@@@.@@@@@.@@@@.@@@@@..@@@.@@.@@@@@..@@..@@@@@.@.@@.@.@@@@@@.@@@@@@@..@..@@@@.@@@@@@@.@@@@@.@@@@@@@@@@@@@.@@@.@@@.@.@..@@@.@
@.@.@.@.@@@@@@@@...@@@.@.@@@@.@..@.@@@@.@@.@@.@.@......@.@@@@@@...@@@@@@@@.@..@..@.@.@@@@@.@@@@.@@.@@@@@@..@.@@@@.@@.@..@@@@.@@@@.@@@@.@@@@@
@@@@@.@..@.@.@.@...@@@@.@@@@.@@@@@@.@.@.@....@..@@@@@..@@@@.@.@@...@@@@.@@.@@.@@@.@@@..@.@@@.@@@@.@@@@@.@@@@.@.@@.@@@@.@@@@@@.@@@.@.@@@@.@.@
.....@@@.@@.@@@@@.@@.@@.@...@@@@.@@..@@@.@@@...@@.@@@@.@@.@@@.@@.@@@@@@@.@.@..@@@@@@.@@@@.@.@....@@@@@.@.@@@@.@..@@@@@@@.@@@.@.@.@..@@.@.@.@
...@@.@...@@..@@@.@@.@.@.@.@.@@.@@@.@@@..@@@.@..@...@@@@.@@@.@...@..@@...@@.@..@@..@@.@@@@@..@..@@@...@@.@@@@..@@.@.@@@@.@..@@@.@.@@.@@...@@
@@@@@@@@@@@..@@@..@.@@.@@..@@..@@@@@@@@..@@..@.@@@@@@@@@@..@@.@@@@.@@.@@@@..@@@.@@....@@....@@.@@@@.@@@@@@@..@@.@.@.@@@@@@@.@@@@@.@.@.@@.@@@
@@.@@.@@@@.@.@@@.@@@.@.@@..@..@@@..@...@.@@.@@@..@.@@@@@.@@..@..@..@@@@@.@@@@.@@@@@.@.@@@@@@@@@@.@@@@@.@@..@.@@@@..@@@.@@@@...@.@....@@@@@@.
@.@@@.@@@.@..@.@@@@@@...@.@@@@@.....@@@@@.@.@@.@@@@@@@.@@@..@.@@.@.@.@@.@@@@@.@@.@@@@@@@@@@@@@@@@.@@...@@@..@@@@@.@@@@@..@.@@...@@@@.@@..@@@
.@.@@@..@@.@@..@@@.@@@@.@@@..@@@.@@@@@@@..@.@@@@@@@@..@@@@@@@.@@..@@@@..@@@..@.@.@@@.@.@@.@..@@.@@@@.@@@@.@...@@@@@@@.@@..@@..@@@@.@@@@.@@@@
@@.@@@.@@@@.@@..@@@.@@@.@..@@.@@.@.@@.@@@@..@@@@.@@...@@..@.@@@@@...@..@@@@@@@.@.@@.@.@@@@@@@...@.@@.@@@@@@.@@.@@.@@..@@@...@..@.@@@@.@.@@@@
@.@@.@@@@..@@@@...@@@.@....@@.@.@.@..@@.@..@@@@.@@@@.@..@@@..@@@@@.@@@.@@@@@@..@@@..@@@@.@.@...@@@..@..@@@......@@.@@@@@@@@..@@@..@@@@@@@..@
@@@.@..@@.@.@@@.@@.@@.@@...@@@@@@.@..@@@@@@@@@@.@@.@@@@@.....@.....@..@@@.@@@@@@.@@..@@@..@@.@.@@@.@@.@@...@.@.@.@@@@@@@@.@@@@.@@@.@@@@@@@@@
.@@@..@@@@@@@@@@@@@.@...@@.@@@@.@.@.@@@.@..@...@@@@.@@@@.@.@@..@..@..@@@.@.@@.@@@@@@.@@..@@@......@@.@@.@.@@@.@@.@@@@@.@.@@@...@.@@@.@@@@..@
@@@@@@@@.@@..@@.@@@@@@@.@@.@@@@.@@@@@@@..@@@@@..@@@@.@@@@@@@@@@@.@.@@@@..@@@@@@.@.@@@@.@@..@.@..@@.@@@..@@@@@@...@.@.@@@@@@@....@@@@@.@@.@@.
.@.@....@@@@....@@.@..@@@@@@@@@..@@.@.@@@..@.@@....@@@@.@@@@@...@@@.@@@@@@.@@@..@@@..@@@.@@.@@@@.@@.@....@.@.@...@@@..@@@@@.@@.@@@.@..@.@...
.....@@@@@..@.@@@@@@@@@..@@@@@...@.@@@@@@@@@@.@.@@@.@@.@.@@.@.@@@.@@@@@@@...@@@@@@.....@@@...@...@.@@@.@@.@.@.@..@@@@@@@..@....@@..@@@@.@@@.
@@..@@.@@@..@.@@@@.@..@@@@@@@@@@@@@@@@.@@.@@.@@@@@@@@@@@@@@@@@.@@@@@.@.....@@.@..@@@@@@..@@.@@....@.@.@@@@.@@@@@.@@.@@..@@@@@@@.@@@@@@@@.@..
..@@..@@@.@@@..@@@@.@@@..@@@@@@@@@@.@@@@@@@....@.@@.@.@.@.@@@@@.@..@@@..@.@@@@.@@@@@.@.@....@.@@..@@@.@@.@..@@@@@@.@@.@..@..@@@..@.@@.@@@@.@
@.@...@@..@.@....@@.@@@...@@.@.@@.@@..@.@@..@...@@@..@@..@.@.@@.@@@..@@..@..@@@@@@..@@@.@@@@@@.@.@@.@@@@..@@@@.@@@.@@@@@@@..@@@@@....@@@.@@@
@@@.@.@@@.@.@@@.@...@@.@@@@@@@@.@..@@@@.@@...@.@@.@@@@..@..@@.@@@..@.@@.@@@@..@@@.@.@@@....@@.@..@@@@.@@@@@@.@@@@..@.@@@@.@@..@@.@....@@@@@@
...@@.@@....@..@.@.@@@@@..@..@@@..@@.@@@.@.@@.@@..@@.@.@.@@.@@..@...@.@@..@..@@@@@@@.....@@@@@@@@@@@@..@.@.@.@.@@@@@@@.....@@@@.@@@@.@@@..@@
.....@.@......@@@@.@.@@@@@.@@@@@.@@@@@@@@@@.@@.@@.@.@@@.@@.@@.@@.@@.@.@..@@@@@@@@.@.@..@.@@.@..@@@@@@@@@..@@@@.@..@@@.@@@@@@@.@@.@@.@.@@@@@@
..@@..@.@..@@@@.@@@@.@...@@@@@..@@@@@@....@.@.@.@@@@@@@..@@...@@@.@@.@.@..@.@.@..@@@.@@..@.@@....@@@@@.@..@@@.@.@.@@@.@@.@.@@@@.@@@@@@@.@...
@..@@@@@.@.@@@@.....@@@.@@@@@.@....@@@@@@@@.@.@@@@@@.@.@..@.@..@@.@@@.@@@@@@@@.@@.@.@@@.@@@@.@.....@@@@.@.@@...@@.@..@@@@@@.@@@.@..@@@@..@.@
@@.@@.@@..@@@@..@@..@@.@@..@..@...@@@@@@.@@@@.@@@@@@@@....@@@@@@@@@@.@@@@...@.@@@@...@@..@.@.@@.@@.....@@@..@@.@.@@.@.@@.@..@@@.@.@@@..@@..@
@@@.@@@@@.@....@@.@@.@.@@@@.@@@.@.@.@@.@.@@@..@@@..@@@.@@@@@@@@@@@.@..@..@@@@@..@@@@@..@@@@@.@@@..@..@@.@.@..@@@@@....@@@..@...@@@..@@@.@@@@
@@@.@@@@@.@@@@@.@@..@...@@@....@.@@.@@@.@@@@.@@@.@..@@@.@@@@@@@@..@.@@.@.@@@.@@....@@.@@@@@@..@@.@.@.@.@@.@@..@@@.@.@@....@@@.@@@.@.@.@@@.@@
..@@@..@@.@...@@@@@.@.@@@@.@@.@.@@@..@@.@@@.@@@@@.@@@@..@.@@...@..@@@..@.@@@@@..@@@@@@.@@@@.@@@...@@@@.@.@@.@.@@.@@..@@@@@@@@@...@.@@.@@@.@@
@@.@.@@.@@@@@@@@@@@..@@@@..@..@@.@.@...@@..@@.@@@@@@@..@@@@@@@..@@@@@.@@.@@@.@.@....@.@..@@.@@@@@@.@.@..@.@@@.@.@@@..@@.@@.@@@@..@@..@.@@@@.
.@@@.@..@@@@@.@.@@@@@.@@@@@@@@....@@@...@.@@@@@@@@.@@@@@.@..@@@@@@@.@@..@.@.@@@@@.@@@@...@@@@...@.@@@.@@@@@@@@.@.@.@@.@.@.@@@.@@@.@@.@.@@@.@
...@.@....@@.@@.@@@..@.@@@.@@.@@@@@...@.@..@@@@.@@@@.@@@.@@..@@@@.@@@.@.@@..@.@@..@@@.@@@@..@@@@.@@@@@.@@@@.@@.@@.@.@@@@@...@.@@.@@@@@@@..@.
.@@.@.@@@@@@@@@@@@.@..@..@@@@@@@@@@..@@@@@@@@@@@.@@@@@@......@@.@.@..@@@@...@@@@@@.@..@..@..@@.@@.@@.@.@@@...@@.@@.....@@.@.@@.@@@@@@....@@@
@@@@.@@@..@.@@.@@@@@@.@@..@..@.@@@@.@@.@@@@@..@@..@.@.@@.@@@..@@@.@@@@..@@@@@.@@...@@@..@@@.@@@@@.@@@..@@@@@@@@@.@.@@@..@.@.@@@.@@.@..@@@.@@
@@@@@@@..@@@@@@..@@@@@...@@@@@@@@@@@@@@@@.@.@@@@@@@@.@.@@@..@@@@.@@..@.@...@.@.@@@@@..@@@.@@..@@@@@@.@@@@@@..@@..@@.@@@@@@..@@.@@.@.@@...@..
@...@.@.@.@.@@@@@@.@@.@.@@..@.@.@@@@@@@.@@.@.@...@@.@..@@@@@@@@@.@@@@@@@@.@.@.@@@.@@..@@.@@@@@.@@@@@@@.@@@.@.@@@.@@.@@..@..@@@@@..@@.@@@.@..
..@@.@....@..@@@@@..@@@.@.@@@.@.@@.@.@@.@.@..@@.@@@..@.@@@@.@@.@@.@@@@@...@@@@@@@@@@@@..@@@@@@.@@.@@.@@.@@.@@.@@@@.@..@...@...@@@.@..@@@.@.@
.@.@...@.@@@.@.@.@.@@@.@@@@@@@@@@@....@@@@@@..@@@@.@@.@.@@@.@@@@@..@@@@@.@@@@@...@@@..@@.@@@@.@@@@@@.@@@.@..@.@..@@@@..@@@.@.@@.@@.@@.@@.@@@
@@.@@@@@@.@@..@.@@.@.@@.@.@....@..@.@@@.@..@@.@@..@@..@@@@@..@@@@@.@@...@@@.@@..@@.@.....@@.@@@.@@@.@@.@@@@@.@@@.@@..@@@@.@@..@@...@...@@.@@
@.@@@.@.@@..@@@@..@@.@@@@...@......@@@@@@@@.@.@@.@.@@@@..@@..@.@@@@@@@..@.@@..@@@@@@@.@@..@.@@@@@@@@@@@.@@@@@...@.@@@.@@@@@@..@@.@.@@.@.@@..
@@@.@@@@@@.@.@..@@@@@.@..@.@.@..@@@..@@@.@@@@@@@@@@.@@@@@@@....@@.@@@.@@@.@...@..@@@@@..@.@.@.@@@.@.@.@@.@@@...@@@@@.@@.@.@.@..@@@@@@.@@@.@.
.@.@@@@@@.@@@.@@..@@@..@@@.@@.@@.@@@@@.@@@@.@@.@..@@.@@.@@@@@@.@..@@@.@....@.@@.@@.@..@@@...@....@..@.@.@.@@.@@@@.@...@@@@@..@@@.@@@.@@.@@@@
..@@...@@.@@@.@@.........@@.@.@.@@@@.@@.@@@@..@@@.@@.@@.@.@@..@@...@@...@@@@@@.@..@@@.@@..@@@.@@@...@.@@.@@.....@.@.@@@..@....@@@@.@...@@@@.
....@..@.@@@.@@@.@@@.@..@@...@@@@@@@@..@..@.@@@.@@@.@@.@@@.@@@...@@@@..@@@..@@.@@.@@.@@@@@@.@@.@@@@@.@@@.@.@..@@@@@.....@@@...@@@.@..@@@@@.@
@.@@.@@@..@@@@@@@@@@..@@@@@@.@@.@..@@..@...@.@@.@..@@.@@@.@@@.@@@@@.....@@..@@@.@@@.@@.@..@@..@@.@..@@@@..@.@@.@@.@.@..@@@@.@@@@.@..@.@@@@..
@.@@@@@@@@@@.@@.@@.@@@..@..@@@@.@.@@@@.@@@.@@.@@..@@.@@@@@@..@@@@@@@@@@@.@.@@@@@...@@..@@@@.@@...@@@.@@@.@@@...@.@.@.@@@@.@.@@.@@@.@@@@.@..@
@@.@.@@..@@.@@@.@@...@@@.@@.@@.@@@@.@..@@..@@@.@@@@@@@@@@.@@.@@@.@@.@@..@@..@@@@.@@@@@@.@..@.@@@@@@@...@@@@@..@@@.@..@@@@@..@@...@.@@@.@@@@@
@@@@.@@.@@@@@@..@@.@@.@..@@@...@.@.@.@...@.@@@@@...@.@@.@@.@@.@@.@@@@.@@@@.@..@@.@@.@@@@@@@@@@@.@.@.@@@@@@@.@.@..@@@@@@@@..@.@.@@@@@@@@@.@..
@.@..@..@.@.@@@.@.@@@@@@@.@..@.@@@...@..@..@@@@.@@@@..@@...@@.@@@.@.@....@.@@..@@@.@@@@@...@.@@@@@.@@@@@@@@@@@@@.@.@@@@@@.@@@.....@@@@@@@@.@
@@@@@..@@@@@@@@@@@@.@@@@.@@@@.@@@.@@..@.@@.@.@@@@@.@.@@.@@.@@....@@@.@.@@@....@...@...@@@@@.@@@@@.@.@@@.@...@.@.@..@.@@@...@.@..@.@@@.@@.@..
@.@@@.@@@@@@@@@@@.@@@@@@@@@@@@.@@..@.@@@.@@@..@@..@@@..@@@@@..@@.@@.@@.@@...@.@@.@@@@@.@@@@@@@.@.@@...@@@.@@.@@..@.@.@@@.@.@@.@..@@@@.@@@@@@
@@@@@.@@@..@@@@.@@@@.@@@@@@@@......@..@@@@@..@.@@@...@@..@@@@.@@...@.@@@@....@@@@@@..@@@@@@@@@@@@@.@@@@..@.@@@....@@@@@...@@@.@@@@@.@@@@@.@@
@.@.@@@@.@.@.@@@...@..@@@@.@@.@@@.@.@@@..@@.@@@@@@@@..@...@@@..@@@...@.@@.@@@.@.@@.@@.@.@@.@@@@@@..@.@.@@.@@@.@..@@@@@@@.@..@.@@.@.@.@@..@@@
@....@.@.@.@.@@.@@@@@@....@@@.@..@..@@..@@.@@@@@@..@@.@@..@@..@@.@@.@@.@@..@@@@.@.@..@@@@..@@@@@@@@@@.@.@.@@@@@@.@@.@@@@@@@.@@@@@@.@@@@.@@@.
@.@@@.@@@..@@@.@...@@.@...@.@.@.@..@.@.@.@@..@@..@.@.@@@@@@.@....@@@@.@@@@.@@@.@@@@@@@@@@@.@..@@..@@.@.@@@@....@@.@..@...@.@.@@..@@...@@@...
@@@@@..@......@.@.@@@.@.@@@@@@@@@@@@@@..@......@.@@@.@.@..@@@@@.@.@.@.@.@@@.@@@.@.@@...@.@@.@@@@.@@.@@..@.@@@@@.@@@......@@@@..@.@@...@@@@@.
@@@@...@.@@@....@@.@@@@@@@.@....@.@...@@@..@@@.@...@@@.@@@@@@@@@.@@@.@..@@@.@@@..@@@@@.@@@..@.@@..@@@@@@@@@@.@@@.@@.@@@@@@@...@@@.@@.@@@@@@@
.@@@@.@.@@..@@@@@...@@.@@@.@@@@.@..@@@@@.@@@@@.@.@@@@@@@@@@.@@.@@@@.@@..@@.@@@.@.@@@.@.@@..@@.@@@@.@...@@..@@...@.@..@@.@.@..@@..@..@@@@@@@@
.@@@.@@@@@@@@@@@@@@.@@..@.@@@@.@@@@@..@@@@@.@.@@@.@@.@..@@@@@@@@...@@.@@@@@.@@@.@@@...@@@.@.@@@......@@.@@@@@.@@@@@@@@@.@@.@@.@.@@@.@@@@@@@.
@@@...@@.@.@..@@@.@@@..@@@@..@.@@.@@@.@@@..@.@.@@@@@@@@..@@@...@@@@.@.@@..@@.@@.@.@@@@@@@.@@@@@.@.@.@@@@..@@@.@.@@@..@@.@@.@.@@@@@@@@.@.@.@.
..@@@@@@.@@..@.@.@@.@@......@@@@@@@@@.@.@@@@@@@@@@@@@..@@@@.@@@@@@@@@@@@@....@.@@@@...@..@@@@@.@@.@@@@.@@@@.@@.@@@@@@@@@..@@@@.@@@@..@.@.@@.
@@@@@@..@@@.@@@.@@.@@@@@.@@.@@@@.@@@@@@@@@@@@@@.@@@.@@@@@@@.@@@@@.@@@@@.@@@@@.@@@@..@@.@@@@@.@.@.@.@@.@@@@.@@@@@@@.@..@@..@@@@@@@.@@@@..@@@.
@..@@@.@..@@@.@@@..@..@@@@@@.@@@@.@@.@..@@...@...@@@@@@@@@.@@.@....@@@.@@..@.@.@.@..@...@@..@.@..@.@.@@@@.@@@..@@......@@.@@.@....@@..@.@.@@
@@@.@@@.@@.@@@..@.@@@@@@@@.@@@@@@@...@@.@@@@@..@@.@.@@.@@@..@@.@.@@.@@.@@.@@.@.@@.@@@@.@.@@@.@@@.@@.@...@@@.@@.@.@@..@@@.....@@...@@.@@@.@@.
.@.@@@@@@@@@@@@@@..@@@@@@@.@@@.@@@.@@@..@@@@@.@....@.@@@..@.@.@@......@@.@.@@@@@@.@.@.@.@.@@@@...@@@..@.@@@.@@@@@.@@@.@@@..@..@..@.@.@@@@@.@
@..@..@@@.@.@.@@@@.@@.@@....@.@.@@@@@.@@..@.@.@.@..@@@.@...@..@@.@@@@.@@.@@@@@@@@@@@@@@@.@@@@@@@.@@@@@@@@...@.@@.@@@.@@...@@@@.@@..@.@.@@@@@
@@..@@@.@@@@@@@.@@.@@@.@.@.@@@.@.@@@@@.@@@@@@.@.@@@@@@@@@@.@@.@.@@.@@@.@.@@@@@@@.@@.@..@@@@@@.@.@@@.@...@.@.@@@@@@@.@@@.@@@@@@@@@@@@..@....@
@@@@@@@@.@.@@@@@@@@.@@@@@.@@@@.@@@@...@..@..@@..@@.@.@@@.@@..@@@@@@@@@@.@.@@@@@.@@@@@@.@@@@@@@.@@@@@@@.@@@.@@.@.@@@@.@.@@@@@.@@.@@@.@@.@@.@@
@@@@.@@.@@@.@.@@.@@.@.@@..@@@@@..@@.@@.@@@@@.@.@@.@@..@.@.@@.@@@.@..@.@.@@@@@@@@@@@.@..@.@@..@@....@@@@@@@@.@....@..@..@@@@.@@@.@@@@.@@....@
....@.@@..@@@.@@@@@.@.@@@@@.@@@@@@@@.@@..@.@@.@@@@@.@@..@..@@.@@@@@@@@......@@@@@@.@@@.@@@@@.@@@...@..@.@@@..@@@@@@..@...@.@@@@@@@@@@@@@.@.@
@@@@@.@.@.@@@@.@@@@@@@.@@.@.@@@.@@.@@@@@@@...@@.@@..@...@@@.@@@.@@@@.@.@@@..@..@.@@.@@@@@@@@@@@.@@.@@@.@..@@.@.@..@@..@.@.@@..@@.@@@@.@@@@@@
@@@@.@..@@.@@@@@@@.@.@@.@@@@@..@@@.@.@@.@@@@@@@@@.@@@@@.@@@.@.@@..@@.@@@@.@.@...@..@@@@@..@@.@@.@@.@..@@@.@@.@@@@.@@@...@@@@.@@.@@...@.@.@@@
....@@@...@.@@@.@@@@@@@@.@@@@@.@..@@@@@@@@.@@@@@..@@@.@.@@@@..@.@@@..@.@@..@@@@@.@@@@@.@@.@.@@.@@@@...@@@@@@@@@@...@@@@@.@.@@..@@@@@.@.@.@@@
.@@@.@.@@@@@@@.@.@@@@.@@..@....@@@@@@@..@.@@@@@@..@.@@@@@@.@.@@@@@@..@.@@@@@@@@.@@@@.......@@@@@@@.@@@.@.@..@@.@@@.@.@@@@.@@.@.@..@@@..@@...
@@@..@...@@.@...@.@..@@@@.....@@@.@..@@.@@@@@.@.@.@.@@@@@@..@...@.@.@.@..@@@@@@@.@@@@.@@@@@.@@@@@@.@@@@@..@@@@.@@@@@.@@@.@@@@@.@@.@..@..@@@.
@@.@@@@@@@.@@@@.@@@@.@.@.@@@..@@@@@@@@.....@.@@@.@.@@..@@@.@@.@@...@..@.@.@@.@.@...@.@.@@@@@.@..@@.@@@.@@..@@@...@@.@@@.@..@@.@.@@.@@.@@@@.@
@@@@..@.@@.@@@....@@@@.@@@@@.@@.@@@@@.@.@@@.@@@@@@.....@.@@.@@.@@..@@@@..@.@@@.@@.@.@@@@@.....@.@....@@@.@@..@.@.@@@@@@@@.@....@@@.@.@..@.@@
.@.@.@.@....@.@..@@.@@@.@..@@@@...@@..@.@@@@@@.@....@@@@@@.@@@.@@@..@....@.@@@@@.@@.@.@..@...@..@.@@..@.@@...@.@@.@@@@.@..@..@@@.@.@.@@.@.@@
@.@@@.@@@...@@.@.@@@@@@@@@@@..@@@@@@@@.@.@@@@@@@@.@@.@@..@.@.@@.@@@@@@@@@..@@...@@@@@@@.@.@@@@@@@..@.@.@@.@@.@@@@@..@@@.@@@.@.@@@@.@@@@@...@
@@@@..@@@.@@.@@@@.@@@@@@.@@@@.@.@@.@.@@@.@@@@@@@@@@.@...@@.@@@.@@@@@.@@.@@@@..@.@@@.@@@@@..@@..@@@@@@@@@@...@.@@@@@.@.@@..@@.@..@.@..@.@.@..
.@@@.@@.@@@@@@..@@@...@@@..@@@@@...@..@@@.@...@@@.@.@@@@@@.@@@@@.@.@.@@..@@..@@@.@@@@@..@@@@@.@@@@@.@..@@@.@.@..@.@.@.@.@@.@.@..@@.@@@@@@@.@
@@@...@@@@@@@@@.@.@..@@@.@..@.@.@@@@@@.@.@@@@@.@.@@.@@@@@@.@@@.@.@@@.@@@@..@@@@@@@.....@@@@@..@@@..@@@@@@@@@@.@@.@@....@.@.@@@@.@@@@@..@@@@@
@.@@@...@@..@@.@.@@...@...@@.@..@@@.@@@@..@..@@@@.@@@@..@@@@.@@@@.....@@@@@@@@.@@@..@@@@@@@@@..@.@@@@..@@@@@@.@@@@.@.@@@@...@@@@@@@@@@@@@@@.
@.@@@@.@@@@.@@..@@@@@@@@...@.@@@.@@@..@.@@@.@@.@..@.@.@.@.@@@.@@@@.@.@.@.@@@@@@@@..@@@@..@....@@@..@.@.@@.@..@@..@@@@@@@@..@@@@.@@@...@....@
@@@.@.@.@.@@@@.@.@@@.@@@@@@@..@@.@.@.@@.@..@@@.@.@.@.@@.@@..@@@@.@.@@@@@@.@@@@@@.@@.@....@@@@.@@@..@.@@.@..@@@@.@.@@.@@.@@.@@@@@.@@@..@@.@@@
@@@@@@@@@@@@@@@@....@@....@@@@@..@@@@.@@.@@.@..@@@@@.@.@@@@@@@..@@@@..@@@@.@@@@@@@@@@@...@@@....@@.@..@@..@@@@@@...@@@@@..@@@..@.@@...@@@@@@
@@@@@@@@@@.@@..@@.@@@@..@.@.@@@..@@@.@@@.@.@@@@@@..@@@...@@@@@@@@@@.@@@@..@@@..@@@.@...@..@@.@@@@@.@..@@@.@.@@@.@.@.@..@.@@@@@@.@@@@.@.@@@.@
@@..@@@@@@@@@@@@.@.@@.@@@..@@...@@@@@@@@@.@@@.@@..@@.@@.@...@@@.@.@.@@@@@@.@@@@@@..@.@.@@@.@@@.@@@@..@.@.@@@.@.@@@@@.@.@@...@@@.@@@..@@@.@@@
.@.@...@@.@@@@@..@@@@@@@.@@@..@...@@.@@@.@@..@@@.@@@@@.@.@@@.@@.@@.@...@.@@@@..@@@@@..@@@@.@@@.@@@@@@@@@@@..@@@@@.@@@..@@.@...@@@.@@@@@@@.@@
.@.@.@@...@@@@.@.@@.@.@@@@.@.@@@..@@@@@.@.@@@.@@@@@.@.@@@@@@.@.@@@@@...@@@@@@.@@@@.@@@@@@.@@....@..@@@.@@..@@@.@.@.@@@.@.@@.@@@@@@.@@@@@@@@@
@@@.@@.@.....@..@@@@@@@@.@.@@@@.@@@@@@@..@@@@@@..@.@......@@@@@@@@@.@@@@@@@@@@.@@@@.@@@@@@@.@@@@.@@.@.@@@@.@@@..@.@@@@@@@@.@.@@...@@.@@@.@@@
..@@@@@.@@..@.@@@@@.@@@@@@@@@@@@@@@@@.@.@@@@@@@.@...@@@@@@.@@@@@@@@@..@.@@@.@@@@@@@@@.@@..@@.@..@......@@@@@.@@.@@.@..@.@.@.@@.@...@@@.@@..@
.@@.@@.@@.@@..@.@@@@.@.@.@@.@@@...@@@@@..@@@..@.@..@..@.@@.@@@@@@@..@@@@@.@..@@...@@@@@.@@..@@@@.@.@..@@..@@@@.@@....@@..@@.@@@@@@@@@@@@@..@
.@@@@@..@@@@@@.@.@@@..@@@@.@@.@.....@.@@@@..@@.@@@.@@@@@.@@.@@@@@..@.@@@@@@@.@.@@@@@@@@@@@@.@@@.@@.@.@@..@.@.@@@@@@@@..@.@@@.@@@@..@.@..@@@@
@@.@@.@@@@@@.@@@@.@@@@@@@@@..@@@.@...@@.@@@@@...@@@@.@@@@..@.@@.@.@@.@@...@@.@.@@....@@..@.@@@@.@.@@@@@@@@.@.@@@@@@.@@.@.@@@.@..@.@@.@@.@@@@
.@.@.@@@@..@@@@.@.@@@@.@@@@@@@@@.@@.@@@@@@@@@@..@@.....@..@@@@@@@@@.@....@.@@@.@@@@@@@.@@..@@.@@.@@@.@.@@@..@.@@@@@@@.@@@.@@..@@@.@@.@..@.@@
..@@@@@...@@@@...@.@@@@..@@@..@@.@.@...@@.@@@....@@@@.@@.@..@.@@.@@@.@@..@.@@@@.@@.@.@@@@@@@@@.@..@@@...@@.@@@@@....@@@@.@.@@@@@@.@@@@@@@@.@
@@@..@.@@@@@@@@@..@.@@.@.@@.@.@.@.@@@@@@.@@.@.@@@@..@.@@@.@.@@.@@@@.@.@@.@@...@.@@@.@..@.@.@@@...@@@@@@@@..@@@.....@@@@....@@@@..@@@@.@.@@.@
@@@...@@..@@.@@@@.@@.@.@@@@@@...@@..@@@@@@.@@@@@@.@@@@@@@.@@.@@...@@..@@@@@...@@.@@.@@...@.@..@@.@.@@.@@.@.@.@@@@.@.@@@@.@@@.@@.@@.@@@..@@..
@@@.@.@..@.@@@@@@.@.@@@@@.@..@@@@@@@.@.@@.@@.@@@.@.@@@@@.@@@@@.@@@.@...@.@@.@@..@@.@@.@@.@..@.@@@@@.@@@.@.@@@.@@@@.@.@..@.@@..@@.@@@@.@@....
.@@.@@...@@@@.@.@...@...@@..@...@..@@@.@@@..@@.@.@..@.@.@@@@.@@@@@@..@@@@.@.@@@..@@.@@@@@.@..@@.@.@@@@...@@@@@@@@@.@.@@@...@@@@.@@.@...@..@.
.@.@.@@@@@.@.@@.....@@@@..@@@.@@@.@@@.@@@@@.@.@.@@@@@.@.@@@@@..@@@.@@@.@@@@@@....@@.@.@@@.@.@@@@.@@.@@..@@@@@@@@@@@@@@.@.@@.@@.@.@@@..@@..@@
@@.@.@.@.@.@@.@...@.@.@.@.@.@@@.@@.@@@@.@@@@..@@..@.@@...@@@@@@..@@@.@.@.@@@@@@@@@@.@@.@.@@@@@.@.@@.@.@@.@@.@@@..@.@.@.@.@.@...@@@.@@@@.@@@@
@@@@@.@@@@@.@.@@@@@@.@@@.@@@@.@@@@.@@@@.@@@.@@@@@@@@@@@.@..@..@@.@@.@.@@.@.@@@..@.@@@.@@@@@.....@@@.@..@@.@.@@@.@@.@..@..@@...@.@@@.@@..@@@.
.@@.@@@@.@@..@@@...@@...@@...@@.....@@@@.@@@.@..@@.@@.@@.@.@..@@@..@@..@@.@@@@.@..@@..@@@.@@@...@@..@@.@@....@.@.@@.@@@.@.@@@@@@..@.@.@@@@@@
.@@.@@.@@..@.@.@@@..@@@@..@.@......@@..@.@@@@@.@@.@.@@@@.@@@..@@@@..@@.@.@..@@.....@@@@.@..@.@@@@@@@@@...@@@@@.@@.@@@.@@@...@@@.@@@@@@@@.@.@
...@@@@..@...@...@...@..@.@@@@@..@..@.@@..@@@@@@@.@..@@.@.@.@@@@@......@..@..@@..@..@@@..@....@@@@@@.@.@@@.@@@@..@@@..@@@@..@.@@..@.@@.@@.@@
@@...@@@..@@@@@...@@@@@@@@.@....@.@@..@@.@@.@@...@@@.@@@@@@..@@@@@@@@.@@.@@@@.@.@.@@..@@.@@@.@@@@@.@@@....@@@@@@@@@@.@@.@@@@@.@@.@@..@@.@@..
@@@...@.@...@@..@@@@@@@@.@@@@@..@@.@..@.@@@@@..@@@@@@.@.@..@@@@.@.@.@...@.@@@@@@@.@@@@@@@@..@@@@..@@@.@@@@@@@.@.@@@.@.@@@..@@.@@@.@@@@.@@@@@
@@@@@@@.@..@@.@@.....@@.@@@@@.@@@@..@@@@@@@@@@..@.@@@@.@@@@@....@.@@@...@@@.@.@@@@@@@@@@@@...@@@@@@@@@.@.@..@.@@@@@@@@@@@@@@..@@@.@.@@@.@@@@
.@@@@.@@.@@@@@@.@@@.@@@@@@@@@@@@.@..@@@.@@@@....@@@@@.@@@.@.@.@@.@@@@@@@@@@@@.@.@@@@.@.@.@@@@@.@@@@@@.@@@@@@@@.@@@@....@.@..@@..@@.@@@@.@@@@
@..@..@@@...@@..@@@..@@.@.@@@..@.@@@.@@@@@.......@.@.@.@@@@@@@.@@@@@@@..@@...@.@@.@.@.@@@@@@.@@@.@..@@@@@.......@@@@@@@@@@@@@@@@.@..@.@@@@@.
.@..@..@.@....@@..@@..@..@@.@.@@@@@@@.@...@@@@@@@@.@@@@@@.@.@@@..@@@@@@@@@.@.@@.@.@.@@.@.@@@@@.@@@.....@@@@@@@.@@..@@@@@.@..@.@..@@.@@..@@@@
@..@@@.@@@@@@@@.@@@@@..@@..@@@@@@@@@@@..@@.@@@.@@@...@.@@@....@@.@@.@@.@@@@@@@@.@@@@..@@@@@@@@@@...@@@@@..@.@@...@@@..@.@@.@.@..@@@@.@.@@@..
@@@@@@@.@@.@@.@@@@@@@@@@@@@..@...@@@....@@@@..@@.@.@@..@...@..@.@.@@@@@.@@@@@..@@...@....@.@..@.@.@.@@@@@@.@@.@@..@@.@.@@@@@@.@.@.@@@.@@@@@@
@@@@..@..@..@@@..@@@.@@@@@@@@@@....@.@.@@@@@@.@@.@@.@..@.@@.@@@@..@@.@..@@..@@.@@...@@.@@@.@@.@@@@..@@@@.@@@@..@.@...@@@.@@@@@...@.@@...@...
@@@@@..@.@..@@@..@@@.@@.@@@...@@...@@.......@@@.@@@@@@.@...@.@.@@@@@@.@.@..@.@@@@.@..@.@@@..@@.@@@@.@@.@@@@@@.@..@.@@@@.@@@.@@@@..@..@.....@
..@@..@@.@@@@..@.@@@.@.@.@@@.@...@@..@@.@.@.@.@@@@@.@@@.@...@.@@@@..@...@@@.@@.@.@@@....@@.@@.@@.....@@@@..@@.@@.@@@@@@@@@@.@.@.@..@@@@@..@@
@@.@@.@@..@.@.@@@@@@@@@@@@@@...@.@@..@@@.@..@@.@.....@@@.@@.@..@@..@@@@.@...@@.@@.@@...@..@.@@@.@@@.@@@@@.@..@@@.@@.@.@@.@@@@@.@.@@.@@@@..@@
.@...@@.@@@@.@@.@..@@@@@.@..@@@@@@@@@@@.@.@.@@@@@.@@@@@@@@@.@@@@.@.@@@@.@@..@@.@@@@..@@@@@.@@@.@@@@@@@.@@@@@..@.@..@@@@.@.@.@@@.@..@.@@@@.@@
@.@.@...@.@.@@@.@.@.@@@@@.@@@..@.@.@@..@@.@@@@..@@@@.@..@@@.@@..@.@@@.@@.@.@.@@@@@@.@@@.@..@@.@@@..@@@...@.@@..@.@@.@@@.@.@@@.@.@.@@.@....@.
..@.@.@@@..@@@@@...@@@..@@@@@@@@@.@@@.@@@@@@@@@...@@@@@.@@@..@@.@@..@..@@@.@@@@@.@.@@.@.@@@@@@.@..@@@@@@.@..@@@@@@@.@@@@@...@@.@.@@@.@@@@..@
@@.@.@@@@...@.@@@@@.@@@..@@@@@@.@.@@@.@@@@.@@@@.@@..@@@@@@@@.@@@@@...@@@.@.@@.@@@.@@@@@@@@@@...@@.@.@@@@@@.@@.@@@@@@.@.@.@@@.@@@@@@@.@.@@@@@
@@@@@@.@@@@.@@@@.@....@.@...@@@..@@@@.@@@.@@..@@@@..@@@@..@@@@@.@@@..@.@@.@..@@.@@@@@@.@@@@.@@.@@@..@..@@..@..@@@@@.@@@.@@.@@@@...@@@.@@@@.@
@@....@..@@.@@@@.@@@@..@@.@@@@@@@@....@.@.@.@@.@@@@@@@..@@@.....@..@.@@@@@.@.@@@@@.@@.@@@@.@.@@@@@@.@.@@@@.@@@@@@@..@.@@@@.@..@@@@.@@@@@...@
.@.@.@@@.@@@@.@..@@@....@@@@@.@.@.@@@@@@@.@@@@....@.@.@@@@@....@..@..@..@@.@@.@@@.@@@@@@@.@@.@@@@@@@.@@..@.@@@@.@@@@@.@@@.@@.@.@.@@.@@@@.@.@
.@.@@@@.@@@.@@@@.@@.@@@.@@..@@@...@..@@@@@@@.@@..@@@...@@@..@.@@..@@@.@..@@.@@@@...@@.@..@@@@.@@@@.@@...@@@.@@@@.@.@...@@..@@@@..@@@.@..@@.@
@.@.@@.@@@@@@@@@@@@@...@..@@@@.@.@.@@@.@@.....@@.@.@.@@@.@@@.@@@..@....@@.@..@..@@@@.@@@@..@.@.@@@@.@..@.@@@.@@.@@@@@..@@.@@@@@@@@@.@@@@@@@@
..@.@.@@..@@@@@..@.@..@@@.@@@@.@@..@@@@@...@@@.@.@@@@.@@.@..@@@@@@@@.@.@.@@.@@..@..@@@.@@.@@@@.@@@@@@@.@@.@@.@.@@@@.@@@@@@@@@.@.@@..@@....@.
.@.@@@@.....@..@@@@@@@...@..@...@@@@.@@.@@@.@.@..@@@@@@@@@@.@@..@@@@@@@@.@.@@.@@@@@@.@@@@..@.@@@..@@..@@.@..@@.@@.@.@.@.@@@@@.@@...@@@..@@@@
@@@..@.@@@.@@..@.@.@@.@..@.@.@.@@@@@@.@..@..@..@@.@.@.@@@.@.@.@.@@@@@@@..@.@@@@@@@@@@@..@@@@..@.@.@@@@.@.@@..@..@...@@.@@@@@.@@.@.@@.@@@@@@@
.@@..@@@.@...@@@.@@.@@.@@@.@@@@..@....@.@@@@@@@@@@@.@@..@@...@.@@.@@@@@.@@@..@@@.@.@..@@..@.@@.@.@@.@@@@@...@.....@.@.@.@@..@..@@@@.@....@@@
@..@.@@@@@@.@@@....@..@.@@@@@@.@@@@@.@..@@.@.@@@@@..@@.@.@@.@@@@@@@..@@..@...@@.@...@.@.@@@@@.@@@@@...@@@@@@.@.@.@.@.@@.@@.@@@.@@.@@.@..@@@.
...@@@@..@@@.@.@@@.@.@@@@.@@@@@..@@.@@@@..@@.@@..@.@.@.@..@.@@@.@.@@@..@..@@@...@@..@@@..@@@@@@@@@@.@@@.@.@.@..@.@@.@...@..@@....@@@@@@@.@.."#;

struct Grid { content: Vec<Vec<Position>>, kernel_size: i32 }
struct Position { value: char, enabled: bool, }
impl Position {
    fn has_roll(value: char) -> bool {
        return value == '@';
    }

    fn disable(&mut self) {
        self.enabled = false;
    }
}
impl Grid {
    fn print_enabled(&self) { 
        for i in 0..self.content.len() {
            for j in 0..self.content[i].len() {
                if Position::has_roll(self.content[i][j].value) && self.content[i][j].enabled {
                    print!("x");
                } else {
                    print!("{}",self.content[i][j].value);
                }
            }
            println!("");
        }
    }

    fn check_rolls_enabled_for_access(&mut self) {
        let kernel_center: i32 = self.kernel_size / 2;

        for r in 0..self.content.len() {
            for p in 0..self.content[r].len() {
                let mut enabled = false;
                let mut rows_near = 4 + 1; // plus itself
                let position = &self.content[r][p];
                // println!("position {}",position.value);
                if !Position::has_roll(position.value) {
                    self.content[r][p].disable();
                } else {
                    for kx in 0..self.kernel_size {
                        if rows_near <= 0 { break; }
                        for ky in 0..self.kernel_size {
                            let x: i32 = r as i32 - kernel_center + kx;
                            let y: i32 = p as i32 - kernel_center + ky;
                            if x < self.content.len() as i32 && x >= 0 && y < self.content[r].len() as i32 && y >= 0 {
                                let neighboor = &self.content[x as usize][y as usize];
                                // println!("neighboor {}", neighboor.value);
                                if Position::has_roll(neighboor.value) {
                                    rows_near -= 1;
                                }
                                if rows_near <= 0 {
                                    self.content[r][p].disable();
                                    break;
                                }
                            }
                        }
                    }
                }
                // println!("---");
            }
        }
    }
}

fn parse_input(input: &str, kernel_size: i32) -> Grid {
    let mut grid: Grid = Grid { content: vec![], kernel_size: kernel_size };
    let rows: Vec<&str> = input.split("\n").collect();
    for row in 0..rows.len() {
        grid.content.push(vec![]);
        for position in 0..rows[row].len() {
            grid.content[row].push(Position { value: rows[row].chars().nth(position).unwrap(), enabled: true });
        }
    }
    return grid;
}

pub fn part1(input: &str) {
    let kernel_size = 3;
    let mut grid = parse_input(input, kernel_size);
    Grid::check_rolls_enabled_for_access(&mut grid);
    Grid::print_enabled(&grid);
    let total = grid.content.into_iter().flat_map(|row| row.into_iter()).filter(|position| position.enabled).count() as i32;
    println!("\nforklifts can access {} rolls", total);
}

